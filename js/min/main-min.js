!function(){function e(e){function n(e){return"https://accounts.spotify.com/authorize?client_id="+t+"&redirect_uri="+encodeURIComponent(o)+"&scope="+encodeURIComponent(e.join(" "))+"&response_type=token"}var t=modClientId,o="http://jmperezperez.com/spotify-oauth-jsfiddle-proxy/",i=n(["user-read-email"]),r=450,s=730,c=screen.width/2-r/2,a=screen.height/2-s/2;window.addEventListener("message",function(n){var t=JSON.parse(n.data);console.log(t),"access_token"==t.type&&e(t.access_token)},!1);var d=window.open(i,"Spotify","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width="+r+", height="+s+", top="+a+", left="+c)}function n(e){return $.ajax({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+e}})}var t=document.getElementById("result-template").innerHTML,o=Handlebars.compile(t),i=document.getElementById("result"),r=document.getElementById("btn-login");r.addEventListener("click",function(){e(function(e){n(e).then(function(e){r.style.display="none",i.innerHTML=o(e)})})})}();